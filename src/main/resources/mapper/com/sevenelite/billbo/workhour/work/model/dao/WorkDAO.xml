<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sevenelite.billbo.workhour.work.model.dao.WorkDAO">
	<resultMap id="workResult" type="WorkDTO">
	<id column="WEEK_WORK_STATISTIC_NO" property="weekNo"/>
	<result column="STATISTIC_DATE" property="date"/>
	<result column="TOTAL_WORK_HOURS" property="totalWork"/>
	<result column="TOTAL_EXTRA_WORK_HOURS" property="extraWork"/>
	<result column="WORK_LATE_COUNT" property = "lateCount"/>
	<result column="WORK_COUNT" property="workCount"/>
	<result column="MEMBER_NO" property="MemNo"/>
	<collection property="member" resultMap="memberResult"/>
	</resultMap>
	<resultMap id="statusAndWorkResultMap" type="com.sevenelite.billbo.workhour.work.model.dto.StatusAndWorkDTO">
 	<id column="MEMBMER_NO" property="memNo"/>
 	<result column="WORKDATE" property="date"/>
 	<result column="COMMUTE" property="commute"/>
 	<result column="LEAVE_WORK" property="lwork"/>
 	<result column="WORKTYPE_CODE" property="type"/>
 	<result column="WORKSTATUS_NO" property="no"/>
 	<collection property="member" resultMap="memberResult"/>
 	</resultMap>
 	<resultMap id="memberResult" type="com.sevenelite.billbo.member.model.dto.MemBbDTO">
		<id property="no" column="MEMBER_NO" />
		<result property="name" column="MEMBER_NAME" />
		<result property="pwd" column="MEMBER_PWD" />
		<result property="email" column="EMAIL" />
		<result property="phone" column="PHONE" />
	</resultMap>
	<resultMap id="type" type="com.sevenelite.billbo.workhour.work.model.dto.WorkTypeDTO">
 		<id column="WORKTYPE_CODE" property="code" />
 		<result column="WORKTYPE_TYPE" property="type"/>
	</resultMap>
	<resultMap id="Voresult" type="com.sevenelite.billbo.member.model.dto.UserDetailsVO">
		<id property="memberno" column="MEMBER_NO" />
	</resultMap>
  	<select id="selectWorkList" resultMap="workResult" parameterType="WorkDTO">
		SELECT
			   A.TOTAL_WORK_HOURS
		     , A.WORK_LATE_COUNT
		     , A.WORK_COUNT  
		     , A.TOTAL_EXTRA_WORK_HOURS
		     , B.COMMUTE
		     , B.LEAVE_WORK
		     , B.MEMBER_NO
		  FROM BB_WEEK_WORK_STATISTIC A 
          JOIN BB_WORKSTATUS B ON (A.MEMBER_NO = B.MEMBER_NO)
		   WHERE A.MEMBER_NO = #{ MemNo }
	</select>

</mapper> 